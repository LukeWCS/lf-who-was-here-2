{#
*
* LF who was here 2 - based on "NV who was here". An extension for the phpBB Forum Software package.
*
* @copyright (c) 2018, LukeWCS, https://www.wcsaga.org/
* @copyright (c) 2015, Anvar, http://phpbbguru.net
* @copyright (c) 2013, nickvergessen, http://www.flying-bits.org/
* @license GNU General Public License, version 2 (GPL-2.0)
*
#}

{% INCLUDE 'overall_header.html' %}
<a id="maincontent"></a>

<h1>{{ lang('LFWWH_CONFIG_TITLE') }}</h1>
<p>{{ lang('LFWWH_CONFIG_DESC', LFWWH_EXT_NAME) }}</p>

{% if LFWWH_NOTES|length %}
	<div class="errorbox notice">
		{% for note in LFWWH_NOTES %}
			<p>{{ note }}</p>
		{% endfor %}
	</div>
{% endif %}

<form id="lfwwh_form" method="post" action="{{ U_ACTION }}">
	<fieldset>
		<legend>{{ lang('LFWWH_SECTION_PERMISSIONS') }}</legend>
		<dl id="lfwwh_opt_admin_mode">
			<dt>
				<label>{{ lang('LFWWH_ADMIN_MODE') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_ADMIN_MODE_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_admin_mode', LFWWH_ADMIN_MODE) }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_use_permissions">
			<dt>
				<label>{{ lang('LFWWH_USE_PERMISSIONS') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_USE_PERMISSIONS_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_use_permissions', LFWWH_USE_PERMISSIONS) }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_perm_for_guests">
			<dt>
				<label>{{ lang('LFWWH_PERM_FOR_GUESTS') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_PERM_FOR_GUESTS_EXP') }}</span>
			</dt>
			<dd>
				<select name="lfwwh_perm_for_guests">
					<option value="3"{{ LFWWH_PERM_FOR_GUESTS == 3 ? ' selected' }}>{{ lang('LFWWH_PERM_STATS_USERS') }}</option>
					<option value="2"{{ LFWWH_PERM_FOR_GUESTS == 2 ? ' selected' }}>{{ lang('LFWWH_PERM_USERS') }}</option>
					<option value="1"{{ LFWWH_PERM_FOR_GUESTS == 1 ? ' selected' }}>{{ lang('LFWWH_PERM_STATS') }}</option>
					<option value="0"{{ LFWWH_PERM_FOR_GUESTS == 0 ? ' selected' }}>{{ lang('LFWWH_PERM_NOTHING') }}</option>
				</select>
			</dd>
		</dl>
		<dl id="lfwwh_opt_perm_for_bots">
			<dt>
				<label>{{ lang('LFWWH_PERM_FOR_BOTS') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_PERM_FOR_BOTS_EXP') }}</span>
			</dt>
			<dd>
				<select name="lfwwh_perm_for_bots">
					<option value="3"{{ LFWWH_PERM_FOR_BOTS == 3 ? ' selected' }}>{{ lang('LFWWH_PERM_STATS_USERS') }}</option>
					<option value="2"{{ LFWWH_PERM_FOR_BOTS == 2 ? ' selected' }}>{{ lang('LFWWH_PERM_USERS') }}</option>
					<option value="1"{{ LFWWH_PERM_FOR_BOTS == 1 ? ' selected' }}>{{ lang('LFWWH_PERM_STATS') }}</option>
					<option value="0"{{ LFWWH_PERM_FOR_BOTS == 0 ? ' selected' }}>{{ lang('LFWWH_PERM_NOTHING') }}</option>
				</select>
			</dd>
		</dl>
		<dl id="lfwwh_opt_perm_bots_only_admin">
			<dt>
				<label>{{ lang('LFWWH_PERM_BOTS_ONLY_ADMIN') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_PERM_BOTS_ONLY_ADMIN_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_perm_bots_only_admin', LFWWH_PERM_BOTS_ONLY_ADMIN) }}
			</dd>
		</dl>
	</fieldset>

{{ _self.form_buttons() }}

	<fieldset>
		<legend>{{ lang('LFWWH_SECTION_DISP_1') }}</legend>
		<dl id="lfwwh_opt_disp_reg_users">
			<dt>
				<label>{{ lang('LFWWH_DISP_REG_USERS') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_DISP_REG_USERS_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_disp_reg_users', LFWWH_DISP_REG_USERS) }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_disp_hidden">
			<dt>
				<label>{{ lang('LFWWH_DISP_HIDDEN') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_DISP_HIDDEN_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_disp_hidden', LFWWH_DISP_HIDDEN) }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_disp_bots">
			<dt>
				<label>{{ lang('LFWWH_DISP_BOTS') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_DISP_BOTS_EXP') }}</span>
			</dt>
			<dd>
				<select name="lfwwh_disp_bots">
					<option value="2"{{ LFWWH_DISP_BOTS == 2 ? ' selected' }}>{{ lang('LFWWH_DISP_BOTS_OWN_LINE') }}</option>
					<option value="1"{{ LFWWH_DISP_BOTS == 1 ? ' selected' }}>{{ lang('LFWWH_DISP_BOTS_WITH_USERS') }}</option>
					<option value="0"{{ LFWWH_DISP_BOTS == 0 ? ' selected' }}>{{ lang('LFWWH_DISP_BOTS_DISABLED') }}</option>
				</select>
			</dd>
		</dl>
		<dl id="lfwwh_opt_disp_guests">
			<dt>
				<label>{{ lang('LFWWH_DISP_GUESTS') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_DISP_GUESTS_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_disp_guests', LFWWH_DISP_GUESTS) }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_disp_time_users">
			<dt>
				<label>{{ lang('LFWWH_DISP_TIME_USERS') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_DISP_TIME_EXP') }}</span>
			</dt>
			<dd>
				<select name="lfwwh_disp_time_users">
					<option value="2"{{ LFWWH_DISP_TIME_USERS == 2 ? ' selected' }}>{{ lang('LFWWH_DISP_AS_TOOLTIP') }}</option>
					<option value="1"{{ LFWWH_DISP_TIME_USERS == 1 ? ' selected' }}>{{ lang('LFWWH_DISP_BEHIND_NAME') }}</option>
					<option value="0"{{ LFWWH_DISP_TIME_USERS == 0 ? ' selected' }}>{{ lang('LFWWH_DISP_DISABLED') }}</option>
				</select>
			</dd>
		</dl>
		<dl id="lfwwh_opt_disp_time_bots">
			<dt>
				<label>{{ lang('LFWWH_DISP_TIME_BOTS') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_DISP_TIME_EXP') }}</span>
			</dt>
			<dd>
				<select name="lfwwh_disp_time_bots">
					<option value="2"{{ LFWWH_DISP_TIME_BOTS == 2 ? ' selected' }}>{{ lang('LFWWH_DISP_AS_TOOLTIP') }}</option>
					<option value="1"{{ LFWWH_DISP_TIME_BOTS == 1 ? ' selected' }}>{{ lang('LFWWH_DISP_BEHIND_NAME') }}</option>
					<option value="0"{{ LFWWH_DISP_TIME_BOTS == 0 ? ' selected' }}>{{ lang('LFWWH_DISP_DISABLED') }}</option>
				</select>
			</dd>
		</dl>
		<dl id="lfwwh_opt_disp_time_format">
			<dt>
				<label>{{ lang('LFWWH_DISP_TIME_FORMAT') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_DISP_TIME_FORMAT_EXP', lang('LFWWH_LAST1'), lang('LFWWH_LAST2'), lang('LFWWH_LAST3')) }}</span>
			</dt>
			<dd>
				<input type="text" name="lfwwh_disp_time_format" size="12" value="{{ LFWWH_DISP_TIME_FORMAT }}">
				{{ LFWWH_DISP_TIME_FORMAT_DEMO }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_disp_ip">
			<dt>
				<label>{{ lang('LFWWH_DISP_IP') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_DISP_IP_EXP') }}</span>
			</dt>
			<dd>
				<select name="lfwwh_disp_ip">
					<option value="2"{{ LFWWH_DISP_IP == 2 ? ' selected' }}>{{ lang('LFWWH_DISP_AS_TOOLTIP') }}</option>
					<option value="1"{{ LFWWH_DISP_IP == 1 ? ' selected' }}>{{ lang('LFWWH_DISP_BEHIND_NAME') }}</option>
					<option value="0"{{ LFWWH_DISP_IP == 0 ? ' selected' }}>{{ lang('LFWWH_DISP_DISABLED') }}</option>
				</select>
			</dd>
		</dl>
	</fieldset>

{{ _self.form_buttons() }}

	<fieldset>
		<legend>{{ lang('LFWWH_SECTION_DISP_2') }}</legend>
		<dl id="lfwwh_opt_time_mode">
			<dt>
				<label>{{ lang('LFWWH_TIME_MODE') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_TIME_MODE_EXP') }}</span>
			</dt>
			<dd>
				<select name="lfwwh_time_mode">
					<option value="1"{{ LFWWH_TIME_MODE == 1 ? ' selected' }}>{{ lang('LFWWH_TIME_MODE_TODAY') }}</option>
					<option value="0"{{ LFWWH_TIME_MODE == 0 ? ' selected' }}>{{ lang('LFWWH_TIME_MODE_PERIOD') }}</option>
				</select>
			</dd>
		</dl>
		<dl id="lfwwh_opt_period_of_time">
			<dt>
				<label>{{ lang('LFWWH_TIME_MODE_PERIOD') ~ lang('COLON') }}</label>
			</dt>
			<dd>
				<input type="number" name="lfwwh_period_of_time_h" value="{{ LFWWH_PERIOD_OF_TIME_H }}" min="0" max="99999">
				{{ lang('HOURS') }}
			</dd>
			<dd>
				<input type="number" name="lfwwh_period_of_time_m" value="{{ LFWWH_PERIOD_OF_TIME_M }}" min="0" max="99999">
				{{ lang('MINUTES') }}
			</dd>
			<dd>
				<input type="number" name="lfwwh_period_of_time_s" value="{{ LFWWH_PERIOD_OF_TIME_S }}" min="0" max="99999">
				{{ lang('SECONDS') }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_sort_by">
			<dt>
				<label>{{ lang('LFWWH_SORT_BY') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_SORT_BY_EXP') }}</span>
			</dt>
			<dd>
				<select name="lfwwh_sort_by">
					<option value="0"{{ LFWWH_SORT_BY == 0 ? ' selected' }}>{{ lang('LFWWH_SORT_BY_NAME_AZ') }}</option>
					<option value="1"{{ LFWWH_SORT_BY == 1 ? ' selected' }}>{{ lang('LFWWH_SORT_BY_NAME_ZA') }}</option>
					<option value="2"{{ LFWWH_SORT_BY == 2 ? ' selected' }}>{{ lang('LFWWH_SORT_BY_VISIT_ASC') }}</option>
					<option value="3"{{ LFWWH_SORT_BY == 3 ? ' selected' }}>{{ lang('LFWWH_SORT_BY_VISIT_DESC') }}</option>
					<option value="4"{{ LFWWH_SORT_BY == 4 ? ' selected' }}>{{ lang('LFWWH_SORT_BY_ID_ASC') }}</option>
					<option value="5"{{ LFWWH_SORT_BY == 5 ? ' selected' }}>{{ lang('LFWWH_SORT_BY_ID_DESC') }}</option>
				</select>
			</dd>
		</dl>
		<dl id="lfwwh_opt_record">
			<dt>
				<label>{{ lang('LFWWH_RECORD') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_RECORD_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_record', LFWWH_RECORD) }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_record_time_format">
			<dt>
				<label>{{ lang('LFWWH_RECORD_TIME_FORMAT') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_RECORD_TIME_FORMAT_EXP') }}</span>
			</dt>
			<dd>
				<input type="text" name="lfwwh_record_time_format" size="12" value="{{ LFWWH_RECORD_TIME_FORMAT }}">
				{{ LFWWH_RECORD_TIME_FORMAT_DEMO }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_template_pos">
			<dt>
				<label>{{ lang('LFWWH_TEMPLATE_POS') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_TEMPLATE_POS_EXP') }}</span>
			</dt>
			<dd>
				<select name="lfwwh_template_pos">
					<option value="0"{{ LFWWH_TEMPLATE_POS == 0 ? ' selected' }}>{{ lang('LFWWH_TEMPLATE_POS_TOP') }}</option>
					<option value="2"{{ LFWWH_TEMPLATE_POS == 2 ? ' selected' }}>{{ lang('LFWWH_TEMPLATE_POS_BEFORE_BDAYS') }}</option>
					<option value="1"{{ LFWWH_TEMPLATE_POS == 1 ? ' selected' }}>{{ lang('LFWWH_TEMPLATE_POS_BOTTOM') }}</option>
				</select>
			</dd>
		</dl>
	</fieldset>

{{ _self.form_buttons() }}

	<fieldset>
		<legend>{{ lang('LFWWH_SECTION_OTHERS') }}</legend>
		<dl id="lfwwh_opt_api_mode">
			<dt>
				<label>{{ lang('LFWWH_API_MODE') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_API_MODE_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_api_mode', LFWWH_API_MODE) }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_clear_up">
			<dt>
				<label>{{ lang('LFWWH_CLEAR_UP') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_CLEAR_UP_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_clear_up', LFWWH_CLEAR_UP) }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_template_pos_all">
			<dt>
				<label>{{ lang('LFWWH_TEMPLATE_POS_ALL') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_TEMPLATE_POS_ALL_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_template_pos_all', LFWWH_TEMPLATE_POS_ALL) }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_create_hidden_info">
			<dt>
				<label>{{ lang('LFWWH_CREATE_HIDDEN_INFO') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_CREATE_HIDDEN_INFO_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_create_hidden_info', LFWWH_CREATE_HIDDEN_INFO) }}
			</dd>
		</dl>
	</fieldset>

{{ _self.form_buttons() }}

	<fieldset>
		<legend>{{ lang('LFWWH_SECTION_LOAD_SETTINGS') }}</legend>
		<dl id="lfwwh_opt_use_cache">
			<dt>
				<label>{{ lang('LFWWH_USE_CACHE') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_USE_CACHE_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_use_cache', LFWWH_USE_CACHE) }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_use_online_time">
			<dt>
				<label>{{ lang('LFWWH_USE_ONLINE_TIME') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_USE_ONLINE_TIME_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_use_online_time', LFWWH_USE_ONLINE_TIME) }}
			</dd>
		</dl>
		<dl id="lfwwh_opt_cache_time">
			<dt>
				<label>{{ lang('LFWWH_CACHE_TIME') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_CACHE_TIME_EXP') }}</span>
			</dt>
			<dd>
				<input type="number" name="lfwwh_cache_time" value="{{ LFWWH_CACHE_TIME }}" min="1" max="{{ LFWWH_CACHE_TIME_MAX }}"> {{ lang('MINUTES') }}
			</dd>
		</dl>
	</fieldset>

{{ _self.form_buttons() }}

	<fieldset>
		<legend>{{ lang('LFWWH_SECTION_RESET') }}</legend>
		<dl id="lfwwh_opt_defaults">
			<dt>
				<label>{{ lang('LFWWH_DEFAULTS') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_DEFAULTS_EXP') }}</span>
			</dt>
			<dd>
				<input class="button2" type="button" name="lfwwh_defaults" value="{{ lang('LFWWH_BUTTON_DEFAULTS') }}">
			</dd>
		</dl>
		<dl id="lfwwh_opt_record_reset">
			<dt>
				<label>{{ lang('LFWWH_RECORD_RESET') ~ lang('COLON') }}</label><br>
				<span>{{ lang('LFWWH_RECORD_RESET_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('lfwwh_record_reset') }}
				{{ LFWWH_RECORD_RESET_TIME }}
			</dd>
		</dl>
	</fieldset>

{{ _self.form_buttons() }}

{{ S_FORM_TOKEN }}
</form>

<p class="lfwwh_copyright">
	{{ LFWWH_EXT_NAME }} v{{ LFWWH_EXT_VER }} &copy; LukeWCS<br>
	{{ lang('LFWWH_LANG_DESC') }} v{{ lang('LFWWH_LANG_EXT_VER') }} &bull; {{ lang('LFWWH_LANG_AUTHOR') }}
</p>

<script>
	var lfwwhACP = {
		tpl: {
			CacheTimeMax: {{ LFWWH_CACHE_TIME_MAX }}
		},
		lang: {
			MsgConfirmRecordReset: "{{ LFWWH_EXT_NAME|e('js') }} ({{ LFWWH_EXT_VER|e('js') }})\n\n{{ lang('LFWWH_MSG_CONFIRM_RECORD_RESET')|e('js') }}"
		}
	};
</script>

{% INCLUDE 'overall_footer.html' %}

{% INCLUDEJS '@lukewcs_whowashere/acp_who_was_here.js' %}
{% INCLUDECSS '@lukewcs_whowashere/acp_who_was_here.css' %}
{% INCLUDECSS '@lukewcs_whowashere/acp_toggle.css' %}

{% macro form_buttons() %}
	<fieldset>
		<legend>{{ lang('ACP_SUBMIT_CHANGES') }}</legend>

		<div class="lfwwh_form_buttons">
			<div class="lfwwh_col_left">
			</div>
			<div class="lfwwh_col_center">
				<input class="button1" type="submit" name="submit" value="{{ lang('LFWWH_BUTTON_SAVE_PAGE') }}">&nbsp;
				<input class="button2" type="button" name="form_reset" value="{{ lang('RESET') }}">
			</div>
			<div class="lfwwh_col_right">
				<a href="#maincontent" title="{{ lang('BACK_TO_TOP') }}" class="lfwwh_back_to_top">{{ _self.icon('fa-chevron-circle-up', false) }}</a>
			</div>
		</div>
	</fieldset>
{% endmacro %}

{% macro icon(classes, decorative = true) -%}
	<span class="icon {{ classes }}"{{ decorative ? ' aria-hidden="true"' : '' }}></span>
{%- endmacro %}

{% macro switch(name, checked = false) -%}
	<input type="checkbox" class="toggle" name="{{ name }}" value="1"{{ checked ? ' checked' }}>
{%- endmacro %}
